{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\ndocument.addEventListener('DOMContentLoaded', function () {\n  const loaderContainer = document.getElementById('loader-container');\n  const searchForm = document.getElementById('searchForm');\n  const searchInput = document.getElementById('searchInput');\n  const gallery = document.getElementById('gallery');\n  const loadMoreButton = document.getElementById('loadMoreButton');\n\n  const apiKey = '41901564-aceebb7c9fdd08ac794ac72d8';\n  let currentPage = 1;\n  let totalHits = 0;\n  let currentSearchTerm = '';\n\n  hideLoader(loaderContainer);\n  loadMoreButton.style.display = 'none';\n\n  searchForm.addEventListener('submit', async function (e) {\n    e.preventDefault();\n    currentPage = 1;\n    loadMoreButton.style.display = 'none';\n\n    const searchTerm = searchInput.value.trim();\n    if (searchTerm === '') {\n      iziToast.error({\n        title: 'Error',\n        message: 'Please enter a search term',\n      });\n      hideLoader(loaderContainer);\n      return;\n    }\n    currentSearchTerm = searchTerm;\n    showLoader(loaderContainer);\n    try {\n      await fetchData(currentSearchTerm);\n    } finally {\n      hideLoader(loaderContainer);\n    }\n  });\n\n  async function fetchData(searchTerm) {\n    try {\n      const response = await axios.get('https://pixabay.com/api/', {\n        params: {\n          key: apiKey,\n          q: searchTerm,\n          image_type: 'photo',\n          orientation: 'horizontal',\n          safesearch: true,\n          per_page: 40,\n          page: currentPage,\n        },\n      });\n\n      totalHits = response.data.totalHits; // Оновлюємо totalHits\n\n      if (response.data.hits.length === 0) {\n        iziToast.error({\n          title: 'Error',\n          message: 'No images found for the provided search term',\n        });\n      } else {\n        displayImages(response.data.hits);\n      }\n\n      if (currentPage * 40 >= totalHits) {\n        // Якщо кількість виведених зображень перевищує або рівна загальній кількості\n        loadMoreButton.style.display = 'none'; // Ховаємо кнопку\n        iziToast.info({\n          title: 'Info',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      } else {\n        loadMoreButton.style.display = 'block'; // Показуємо кнопку\n      }\n    } catch (error) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Failed to fetch images. Please try again later.',\n      });\n    }\n  }\n\n  loadMoreButton.addEventListener('click', async function () {\n    currentPage++;\n    await fetchData(currentSearchTerm);\n    smoothScroll();\n  });\n  function smoothScroll() {\n    const cardHeight = document\n      .querySelector('.gallery-item')\n      .getBoundingClientRect().height;\n\n    window.scrollBy(0, cardHeight * 2);\n  }\n  function showLoader(loaderContainer) {\n    if (loaderContainer) {\n      loaderContainer.style.display = 'block';\n    }\n  }\n\n  function hideLoader(loaderContainer) {\n    if (loaderContainer) {\n      loaderContainer.style.display = 'none';\n    }\n  }\n\n  function displayImages(images) {\n    gallery.innerHTML = '';\n\n    if (images.length === 0) {\n      iziToast.info({\n        title: 'Info',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      hideLoader();\n      return;\n    }\n\n    images.forEach(image => {\n      const card = document.createElement('div');\n      card.className = 'gallery-item';\n\n      // Обгортаємо картку зображення в посилання для SimpleLightbox\n      card.innerHTML = `\n      <a href=\"${image.largeImageURL}\" data-lightbox=\"gallery\" data-title=\"Likes: ${image.likes}, Views: ${image.views}, Comments: ${image.comments}, Downloads: ${image.downloads}\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" data-src=\"${image.largeImageURL}\" data-caption=\"Likes: ${image.likes}, Views: ${image.views}, Comments: ${image.comments}, Downloads: ${image.downloads}\">\n        </a>\n        <div class=\"image-stats\">\n      <div class=\"stat-item\">\n        <p class=\"stat-label\">Likes:</p>\n        <p class=\"stat-value\">${image.likes}</p>\n      </div>\n      <div class=\"stat-item\">\n        <p class=\"stat-label\">Views:</p>\n        <p class=\"stat-value\">${image.views}</p>\n      </div>\n      <div class=\"stat-item\">\n        <p class=\"stat-label\">Comments:</p>\n        <p class=\"stat-value\">${image.comments}</p>\n      </div>\n      <div class=\"stat-item\">\n        <p class=\"stat-label\">Downloads:</p>\n        <p class=\"stat-value\">${image.downloads}</p>\n      </div>\n    </div>\n      `;\n\n      gallery.appendChild(card);\n    });\n\n    const lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n\n    lightbox.refresh();\n    // Оновлення галереї\n  }\n});\n"],"names":["loaderContainer","searchForm","searchInput","gallery","loadMoreButton","apiKey","currentPage","totalHits","currentSearchTerm","hideLoader","e","searchTerm","iziToast","showLoader","fetchData","response","axios","displayImages","smoothScroll","cardHeight","images","image","card","SimpleLightbox"],"mappings":"owBASA,SAAS,iBAAiB,mBAAoB,UAAY,CACxD,MAAMA,EAAkB,SAAS,eAAe,kBAAkB,EAC5DC,EAAa,SAAS,eAAe,YAAY,EACjDC,EAAc,SAAS,eAAe,aAAa,EACnDC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAiB,SAAS,eAAe,gBAAgB,EAEzDC,EAAS,qCACf,IAAIC,EAAc,EACdC,EAAY,EACZC,EAAoB,GAExBC,EAAWT,CAAe,EAC1BI,EAAe,MAAM,QAAU,OAE/BH,EAAW,iBAAiB,SAAU,eAAgBS,EAAG,CACvDA,EAAE,eAAc,EAChBJ,EAAc,EACdF,EAAe,MAAM,QAAU,OAE/B,MAAMO,EAAaT,EAAY,MAAM,KAAI,EACzC,GAAIS,IAAe,GAAI,CACrBC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,4BACjB,CAAO,EACDH,EAAWT,CAAe,EAC1B,MACD,CACDQ,EAAoBG,EACpBE,EAAWb,CAAe,EAC1B,GAAI,CACF,MAAMc,EAAUN,CAAiB,CACvC,QAAc,CACRC,EAAWT,CAAe,CAC3B,CACL,CAAG,EAED,eAAec,EAAUH,EAAY,CACnC,GAAI,CACF,MAAMI,EAAW,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAKX,EACL,EAAGM,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAML,CACP,CACT,CAAO,EAEDC,EAAYQ,EAAS,KAAK,UAEtBA,EAAS,KAAK,KAAK,SAAW,EAChCH,EAAS,MAAM,CACb,MAAO,QACP,QAAS,8CACnB,CAAS,EAEDK,EAAcF,EAAS,KAAK,IAAI,EAG9BT,EAAc,IAAMC,GAEtBH,EAAe,MAAM,QAAU,OAC/BQ,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,4DACnB,CAAS,GAEDR,EAAe,MAAM,QAAU,OAElC,MAAC,CACAQ,EAAS,MAAM,CACb,MAAO,QACP,QAAS,iDACjB,CAAO,CACF,CACF,CAEDR,EAAe,iBAAiB,QAAS,gBAAkB,CACzDE,IACA,MAAMQ,EAAUN,CAAiB,EACjCU,GACJ,CAAG,EACD,SAASA,GAAe,CACtB,MAAMC,EAAa,SAChB,cAAc,eAAe,EAC7B,sBAAqB,EAAG,OAE3B,OAAO,SAAS,EAAGA,EAAa,CAAC,CAClC,CACD,SAASN,EAAWb,EAAiB,CAC/BA,IACFA,EAAgB,MAAM,QAAU,QAEnC,CAED,SAASS,EAAWT,EAAiB,CAC/BA,IACFA,EAAgB,MAAM,QAAU,OAEnC,CAED,SAASiB,EAAcG,EAAQ,CAG7B,GAFAjB,EAAQ,UAAY,GAEhBiB,EAAO,SAAW,EAAG,CACvBR,EAAS,KAAK,CACZ,MAAO,OACP,QACE,0EACV,CAAO,EACDH,IACA,MACD,CAEDW,EAAO,QAAQC,GAAS,CACtB,MAAMC,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAY,eAGjBA,EAAK,UAAY;AAAA,iBACND,EAAM,6DAA6DA,EAAM,iBAAiBA,EAAM,oBAAoBA,EAAM,wBAAwBA,EAAM;AAAA,sBACnJA,EAAM,sBAAsBA,EAAM,mBAAmBA,EAAM,uCAAuCA,EAAM,iBAAiBA,EAAM,oBAAoBA,EAAM,wBAAwBA,EAAM;AAAA;AAAA;AAAA;AAAA;AAAA,gCAK7KA,EAAM;AAAA;AAAA;AAAA;AAAA,gCAINA,EAAM;AAAA;AAAA;AAAA;AAAA,gCAINA,EAAM;AAAA;AAAA;AAAA;AAAA,gCAINA,EAAM;AAAA;AAAA;AAAA,QAKhClB,EAAQ,YAAYmB,CAAI,CAC9B,CAAK,EAEgB,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GACpB,CAAK,EAEQ,QAAO,CAEjB,CACH,CAAC"}